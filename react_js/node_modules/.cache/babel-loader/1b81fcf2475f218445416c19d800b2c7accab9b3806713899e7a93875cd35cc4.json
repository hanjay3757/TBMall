{"ast":null,"code":"var _jsxFileName = \"C:\\\\JWH\\\\vsc\\\\study\\\\team\\\\src\\\\components\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const [cartItems, setCartItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    loadCartItems();\n  }, []);\n  const loadCartItems = async () => {\n    try {\n      const response = await axios.get('http://localhost:8080/mvc/stuff/api/cart', {\n        withCredentials: true\n      });\n      setCartItems(response.data);\n      setLoading(false);\n    } catch (error) {\n      console.error('장바구니 로딩 실패:', error);\n      setLoading(false);\n    }\n  };\n  const handleRemoveItem = async cartId => {\n    try {\n      const response = await axios.delete(`http://localhost:8080/mvc/stuff/api/cart/${cartId}`, {\n        withCredentials: true\n      });\n      if (response.data.status === 'success') {\n        loadCartItems();\n      }\n    } catch (error) {\n      console.error('장바구니 아이템 삭제 실패:', error);\n    }\n  };\n  const handleUpdateQuantity = async (cart_id, newQuantity) => {\n    try {\n      const response = await axios.patch(`http://localhost:8080/mvc/stuff/api/cart/${cart_id}`, {\n        quantity: newQuantity\n      }, {\n        withCredentials: true\n      });\n      if (response.data.status === 'success') {\n        loadCartItems();\n      }\n    } catch (error) {\n      console.error('수량 업데이트 실패:', error);\n      alert('재고가 부족합니다.');\n    }\n  };\n  const handleCheckout = async () => {\n    try {\n      const response = await axios.post('http://localhost:8080/mvc/stuff/api/cart/checkout', {}, {\n        withCredentials: true\n      });\n      if (response.data.status === 'success') {\n        alert('주문이 완료되었습니다.');\n        setCartItems([]);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('주문 처리 실패:', error);\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || '주문 처리 중 오류가 발생했습니다.');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\uB85C\\uB529 \\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uAC00 \\uBE44\\uC5B4\\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-items\",\n      children: [cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item.itemName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uAC00\\uACA9: \", item.itemPrice, \"\\uC6D0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quantity-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            max: item.itemStock + item.quantity,\n            value: item.quantity,\n            onChange: e => handleUpdateQuantity(item.cartId, parseInt(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRemoveItem(item.cartId),\n            className: \"remove-button\",\n            children: \"\\uC0AD\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uCD1D \\uAC00\\uACA9: \", (item.itemPrice * item.quantity).toLocaleString(), \"\\uC6D0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)]\n      }, item.cartId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-total\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uCD1D \\uACB0\\uC81C \\uAE08\\uC561: \", cartItems.reduce((total, item) => total + item.itemPrice * item.quantity, 0), \"\\uC6D0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCheckout,\n          disabled: !cartItems.length,\n          className: \"checkout-button\",\n          children: \"\\uC8FC\\uBB38\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"cilFcC1AIWylMAcpxsY9xFoPL/k=\");\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Cart","_s","cartItems","setCartItems","loading","setLoading","loadCartItems","response","get","withCredentials","data","error","console","handleRemoveItem","cartId","delete","status","handleUpdateQuantity","cart_id","newQuantity","patch","quantity","alert","handleCheckout","post","_error$response","_error$response$data","message","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","map","item","itemName","itemPrice","type","min","max","itemStock","value","onChange","e","parseInt","target","onClick","toLocaleString","reduce","total","disabled","_c","$RefreshReg$"],"sources":["C:/JWH/vsc/study/team/src/components/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Cart() {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadCartItems();\r\n  }, []);\r\n\r\n  const loadCartItems = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:8080/mvc/stuff/api/cart', {\r\n        withCredentials: true\r\n      });\r\n      setCartItems(response.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('장바구니 로딩 실패:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveItem = async (cartId) => {\r\n    try {\r\n      const response = await axios.delete(\r\n        `http://localhost:8080/mvc/stuff/api/cart/${cartId}`,\r\n        { withCredentials: true }\r\n      );\r\n      if (response.data.status === 'success') {\r\n        loadCartItems();\r\n      }\r\n    } catch (error) {\r\n      console.error('장바구니 아이템 삭제 실패:', error);\r\n    }\r\n  };\r\n\r\n  const handleUpdateQuantity = async (cart_id, newQuantity) => {\r\n    try {\r\n      const response = await axios.patch(\r\n        `http://localhost:8080/mvc/stuff/api/cart/${cart_id}`,\r\n        { quantity: newQuantity },\r\n        { withCredentials: true }\r\n      );\r\n      \r\n      if (response.data.status === 'success') {\r\n        loadCartItems();\r\n      }\r\n    } catch (error) {\r\n      console.error('수량 업데이트 실패:', error);\r\n      alert('재고가 부족합니다.');\r\n    }\r\n  };\r\n\r\n  const handleCheckout = async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        'http://localhost:8080/mvc/stuff/api/cart/checkout',\r\n        {},\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.data.status === 'success') {\r\n        alert('주문이 완료되었습니다.');\r\n        setCartItems([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('주문 처리 실패:', error);\r\n      alert(error.response?.data?.message || '주문 처리 중 오류가 발생했습니다.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>로딩 중...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <h2>장바구니</h2>\r\n      {cartItems.length === 0 ? (\r\n        <p>장바구니가 비어있습니다.</p>\r\n      ) : (\r\n        <div className=\"cart-items\">\r\n          {cartItems.map(item => (\r\n            <div key={item.cartId} className=\"cart-item\">\r\n              <h3>{item.itemName}</h3>\r\n              <p>가격: {item.itemPrice}원</p>\r\n              <div className=\"quantity-controls\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max={item.itemStock + item.quantity}\r\n                  value={item.quantity}\r\n                  onChange={(e) => handleUpdateQuantity(item.cartId, parseInt(e.target.value))}\r\n                />\r\n                <button \r\n                  onClick={() => handleRemoveItem(item.cartId)}\r\n                  className=\"remove-button\"\r\n                >\r\n                  삭제\r\n                </button>\r\n              </div>\r\n              <p>총 가격: {(item.itemPrice * item.quantity).toLocaleString()}원</p>\r\n            </div>\r\n          ))}\r\n          <div className=\"cart-total\">\r\n            <h3>총 결제 금액: {cartItems.reduce((total, item) => total + (item.itemPrice * item.quantity), 0)}원</h3>\r\n            <button \r\n              onClick={handleCheckout}\r\n              disabled={!cartItems.length}\r\n              className=\"checkout-button\"\r\n            >\r\n              주문하기\r\n            </button>\r\n          </div>\r\n        \r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}